---
phase: 01-foundation-design-system
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - shared/styles/package.json
  - shared/styles/tokens.css
  - shared/styles/reset.css
  - shared/styles/utilities.css
  - web/package.json
  - web/index.html
  - web/css/main.css
autonomous: true

must_haves:
  truths:
    - "Three-layer design token CSS file exists with primitives, semantic, and component layers"
    - "Dark palette colors pass WCAG 4.5:1 contrast ratio (charcoal backgrounds, off-white text, neon green accents)"
    - "npm workspaces resolve shared/styles as @portfolio/styles dependency"
    - "web/index.html renders a styled test page using shared design tokens via relative path imports"
    - "Responsive utility classes provide mobile-first breakpoints"
  artifacts:
    - path: "shared/styles/tokens.css"
      provides: "Three-layer CSS design token system"
      contains: "primitive-color-charcoal"
      min_lines: 100
    - path: "shared/styles/reset.css"
      provides: "Modern CSS reset/normalize"
      min_lines: 30
    - path: "shared/styles/utilities.css"
      provides: "Responsive utilities and layout helpers"
      contains: "container"
      min_lines: 30
    - path: "package.json"
      provides: "npm workspaces monorepo configuration"
      contains: "workspaces"
    - path: "web/index.html"
      provides: "Test page demonstrating design system"
      contains: "tokens.css"
    - path: "web/css/main.css"
      provides: "Web-specific styles"
      min_lines: 10
  key_links:
    - from: "web/index.html"
      to: "shared/styles/tokens.css"
      via: "relative path link element"
      pattern: "shared/styles/tokens\\.css"
    - from: "web/index.html"
      to: "shared/styles/reset.css"
      via: "relative path link element"
      pattern: "shared/styles/reset\\.css"
    - from: "package.json"
      to: "shared/styles"
      via: "workspaces array"
      pattern: "shared/styles"
---

<objective>
Create the monorepo foundation with npm workspaces and implement the complete three-layer CSS design token system (primitives, semantic, component) with WCAG-compliant dark/tech color palette.

Purpose: All future web projects (portfolio, landing page, iOS demos) depend on shared design tokens for visual consistency. This plan establishes the file structure and design system that everything else builds upon.

Output: Working monorepo with shared CSS design tokens, reset, utilities, and a test page proving the system works.
</objective>

<execution_context>
@/Users/wojciecholszak/.claude/get-shit-done/workflows/execute-plan.md
@/Users/wojciecholszak/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-design-system/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create monorepo structure with npm workspaces and three-layer design tokens</name>
  <files>
    package.json
    shared/styles/package.json
    shared/styles/tokens.css
    shared/styles/reset.css
    shared/styles/utilities.css
    web/package.json
  </files>
  <action>
    Create the monorepo directory structure and all foundational files:

    1. **Root package.json** — npm workspaces monorepo config:
       - name: "portfolio-monorepo", private: true
       - workspaces: ["shared/styles", "web", "ios-demo"]
       - scripts: "dev:web": "cd web && npx http-server -p 8080"
       - devDependencies: "http-server": "^14.1.1"

    2. **shared/styles/package.json** — workspace package:
       - name: "@portfolio/styles", version: "1.0.0"
       - main: "tokens.css"
       - files: ["tokens.css", "reset.css", "utilities.css"]

    3. **shared/styles/tokens.css** — Three-layer design token system (follow RESEARCH.md Code Examples section exactly):
       - LAYER 1 PRIMITIVES: All color, spacing, typography, border-radius primitives from research
         - Colors: charcoal-900 through 500, neon-green-300 through 600, electric-blue-300 through 500, gray-50 through 800
         - Spacing: 4px base scale (spacing-1 through spacing-12)
         - Typography: font families (sans + mono), sizes (xs through 4xl), weights, line-heights
         - Border radius: sm through full
       - LAYER 2 SEMANTIC: Map primitives to UI roles with fallback values
         - Background: bg-primary (#0E0E0E charcoal, NOT pure black), bg-secondary, bg-elevated, bg-overlay
         - Text: text-primary, text-secondary, text-muted, text-disabled
         - Interactive: interactive-primary (neon-green), interactive-secondary (electric-blue), with hover/active states
         - Border: border-default, border-focus
         - Spacing: page-padding-mobile, page-padding-desktop, section-gap, component-gap, element-gap
         - Typography: heading sizes, body, caption, font families
         - Borders: button, card, input radii
       - LAYER 3 COMPONENT: Button (.button-primary, .button-secondary), Card (.card), Typography (h1-h3, body), Code blocks
         - Button must include :hover, :active, :focus-visible states
         - Focus-visible must use outline + box-shadow for visibility on dark backgrounds (per research pitfall 5)
       - EVERY var() call must include a fallback value (per research pitfall 4)
       - Use neon green (#22C55E) as primary accent, electric blue (#3A82FF) as secondary

    4. **shared/styles/reset.css** — Modern CSS reset:
       - Box-sizing: border-box on all elements
       - Remove default margins/padding
       - Smooth scrolling on html
       - Set min-height: 100vh on body
       - Reset list styles, image max-width, inherit fonts on form elements
       - Reduced motion media query: disable animations/transitions for prefers-reduced-motion

    5. **shared/styles/utilities.css** — Shared utility classes:
       - .container: max-width 1200px, centered, responsive padding (mobile/desktop semantic tokens)
       - .sr-only: screen-reader-only class for accessibility
       - .flex, .flex-col, .flex-center, .flex-between: flexbox utilities
       - .grid: CSS grid with auto-fit responsive columns
       - .text-center, .text-left, .text-right: text alignment
       - .hidden, .visible: display utilities
       - Responsive breakpoint custom properties as comments (640px mobile, 768px tablet, 1024px desktop, 1280px wide)
       - Media query utility classes: .hide-mobile, .hide-desktop

    6. **web/package.json** — Web workspace:
       - name: "@portfolio/web", version: "1.0.0", private: true
       - dependencies: { "@portfolio/styles": "*" }

    After creating all files, run `npm install` from root to establish workspace symlinks.
  </action>
  <verify>
    Run from project root:
    1. `npm install` completes without errors
    2. `ls -la node_modules/@portfolio/styles` shows symlink to shared/styles
    3. `grep -c "primitive-color" shared/styles/tokens.css` returns 20+ (confirms primitives exist)
    4. `grep -c "var(--" shared/styles/tokens.css` confirms extensive use of CSS variables with references
    5. `grep -c "fallback" shared/styles/tokens.css` or check that var() calls contain comma (fallback values)
  </verify>
  <done>
    - npm workspaces resolve @portfolio/styles as symlink to shared/styles
    - tokens.css contains all three layers (primitives, semantic, component) with 100+ lines
    - Every var() reference includes a fallback value
    - reset.css provides modern CSS reset with reduced-motion support
    - utilities.css provides container, flexbox, grid, and accessibility utilities
    - Charcoal #0E0E0E used as primary background (not pure black #000000)
  </done>
</task>

<task type="auto">
  <name>Task 2: Create test page demonstrating the design system</name>
  <files>
    web/index.html
    web/css/main.css
  </files>
  <action>
    Create a test/demo page that exercises all major design tokens to verify the system works end-to-end.

    1. **web/index.html** — Design system demo page:
       - DOCTYPE html, lang="pl" (Polish portfolio), charset UTF-8, viewport meta
       - Title: "Portfolio — Design System"
       - Link stylesheets in order: ../shared/styles/reset.css, ../shared/styles/tokens.css, ../shared/styles/utilities.css, ./css/main.css
       - Use relative paths (NOT absolute) to avoid GitHub Pages path issues (per research pitfall 2)
       - Body content demonstrating all token layers:
         a) Header with h1 "Design System Preview" using text-primary color
         b) Section with typography samples: h1, h2, h3, paragraph text, muted text, code inline
         c) Section with buttons: .button-primary, .button-secondary (both with hover/focus states testable)
         d) Section with two .card components containing sample content
         e) Section demonstrating color swatches: bg-primary, bg-secondary, bg-elevated, interactive colors
         f) Section with .container, .flex, and .grid utility demonstrations
         g) Footer with text-muted color
       - Include skip-to-content link for accessibility
       - All text content can be in English (it's a dev test page, not user-facing)

    2. **web/css/main.css** — Web-specific styles:
       - Import nothing (tokens loaded via HTML link elements)
       - Page-specific layout: sections with section-gap spacing
       - Color swatch display: small colored divs showing each design token color with labels
       - Responsive adjustments using media queries at tablet (768px) and desktop (1024px) breakpoints
       - Typography section styling
       - Reference ONLY semantic tokens (Layer 2) or component classes (Layer 3) — never reference primitives directly in project CSS

    The page should be visually verifiable — a human should be able to look at it and confirm colors, typography, spacing, and components render correctly with the dark/tech theme.
  </action>
  <verify>
    1. Open web/index.html in browser (or `npx http-server web -p 8080` and visit localhost:8080)
    2. Page renders with dark charcoal background (not pure black, not white)
    3. Text is readable (off-white on charcoal)
    4. Neon green buttons are visible with hover/focus states
    5. Cards have elevated background with border
    6. No broken stylesheet references (check browser console for 404s)
    7. All relative paths resolve correctly
  </verify>
  <done>
    - web/index.html loads all shared stylesheets via relative paths without 404s
    - Page displays dark/tech theme with charcoal background and off-white text
    - All design token layers are visually demonstrated (colors, typography, spacing, components)
    - Button hover/focus states work with visible focus indicators
    - Page is responsive and adjusts layout at tablet/desktop breakpoints
  </done>
</task>

</tasks>

<verification>
1. `npm install` at root succeeds and creates @portfolio/styles symlink
2. `npx http-server web -p 8080` serves the test page correctly
3. Browser shows dark charcoal background with readable off-white text
4. Buttons display neon green with visible hover and focus-visible states
5. Cards display with elevated background and border
6. No console errors or 404s for stylesheet imports
7. tokens.css has three clearly separated layers with comments
8. All var() calls include fallback values
</verification>

<success_criteria>
- Monorepo structure with npm workspaces is functional (symlinks resolve)
- Three-layer design token system is complete and well-commented
- WCAG-compliant dark palette uses charcoal #0E0E0E (not #000000) with 4.5:1+ contrast text
- Test page demonstrates all token layers and renders correctly
- All stylesheet imports use relative paths (GitHub Pages compatible)
- Focus indicators are visible on dark backgrounds
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-design-system/01-01-SUMMARY.md`
</output>
